<!-- <div class="modal">

  <div
    class="modal fade"
    id="exampleModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog ">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">New Quotation</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <h2>Details</h2>
          <div class="row">
            <div class="row">
              <div class="col-8">
                <mat-form-field appearance="outline" class="w-100 inputfield">
                  <mat-label>Quotation Name</mat-label>
                  <input
                    matInput
                    placeholder="Quotation Name"
                    name="quotationName"
                  />
                </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Supplier type list</mat-label>
                  <mat-select>
                    <ng-container *ngFor="let data of list">
                      <ng-container *ngIf="data.list_Name === 'Supplier_Type'">
                        <mat-option
                          *ngFor="let item of data.list_Options"
                          [value]="item.id"
                        >
                          {{ item.value }}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-8">
                <mat-form-field
                  appearance="outline"
                  class="example-full-width w-100"
                >
                  <mat-label> Quotation Description</mat-label>
                  <textarea
                    matInput
                    placeholder="Ex. It makes me feel..."
                    class="custom-textarea"
                  ></textarea>
                </mat-form-field>
              </div>
              <div class="col-4">
                <div class="row">
                  <div>
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label> Supplier Name </mat-label>
                      <mat-select>
                        <ng-container *ngFor="let data of list">
                          <ng-container *ngIf="data.list_Name === 'Vendor'">
                            <mat-option
                              *ngFor="let item of data.list_Options"
                              [value]="item.id"
                            >
                              {{ item.value }}
                            </mat-option>
                          </ng-container>
                        </ng-container>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div>
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label> Supplier Pricing</mat-label>
                      <mat-select>
                        <ng-container *ngFor="let data of list">
                          <ng-container
                            *ngIf="data.list_Name === 'Supplier_Pricing_Type'"
                          >
                            <mat-option
                              *ngFor="let item of data.list_Options"
                              [value]="item.id"
                            >
                              {{ item.value }}
                            </mat-option>
                          </ng-container>
                        </ng-container>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Log Flag </mat-label>
                  <mat-select>
                    <ng-container *ngFor="let data of list">
                      <ng-container *ngIf="data.list_Name === 'LOB_Flag'">
                        <mat-option
                          *ngFor="let item of data.list_Options"
                          [value]="item.id"
                        >
                          {{ item.value }}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Currency of Quotation list</mat-label>
                  <mat-select>
                    <ng-container *ngFor="let data of list">
                      <ng-container *ngIf="data.list_Name === 'CurrencyCode'">
                        <mat-option
                          *ngFor="let item of data.list_Options"
                          [value]="item.id"
                        >
                          {{ item.value }}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Country list</mat-label>
                  <mat-select>
                    <ng-container *ngFor="let data of country">
                      <ng-container>
                        <mat-option>
                          {{ data.value }}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
  
            <div class="row">
              <mat-form-field appearance="outline" class="w-100 inputfield w-100">
                <mat-label>Link to quotation</mat-label>
                <input
                  matInput
                  placeholder="Link to quotation"
                  name="quotationLink"
                />
              </mat-form-field>
            </div>
  
            Shipping
            <div class="row">
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100 inputfield">
                  <mat-label>Freight and Duty %</mat-label>
                  <input
                    matInput
                    placeholder="Freight and Duty %"
                    name="freight&Duty"
                  />
                </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Inco Terms of Supplier Bid list</mat-label>
                  <mat-select>
                    <ng-container *ngFor="let data of list">
                      <ng-container *ngIf="data.list_Name === 'CurrencyCode'">
                        <mat-option
                          *ngFor="let item of data.list_Options"
                          [value]="item.id"
                        >
                          {{ item.value }}
                        </mat-option>
                      </ng-container>
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
  
              <div class="col-4">
                <mat-form-field appearance="outline" class="w-100 inputfield">
                  <mat-label>Inco Location</mat-label>
                  <input
                    matInput
                    placeholder="IncoLocation"
                    name="IncoLocation"
                  />
                </mat-form-field>
              </div>
  
              Terms And Condition
              <div class="row">
                <div class="col-4">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Date of Latest Price Set</mat-label>
                    <input matInput [matDatepicker]="picker1" />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker1"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-4">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Price Valid Until Date</mat-label>
                    <input matInput [matDatepicker]="picker2" />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker2"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-4">
                  <mat-form-field appearance="outline" class="w-100 inputfield">
                    <mat-label>Annual Escalation %</mat-label>
                    <input
                      matInput
                      placeholder="Annual Escalation %"
                      name="annualEscalation&Duty"
                    />
                  </mat-form-field>
                </div>
              </div>
  
              <div class="row">
                <div class="col-4">
                  <mat-form-field appearance="outline" class="w-100 inputfield">
                    <mat-label>Forex Exposure</mat-label>
                    <input
                      matInput
                      placeholder="Forex Exposure"
                      name="forexExposure"
                    />
                  </mat-form-field>
                </div>
                <div class="col-4">
                  <mat-form-field appearance="outline" class="w-100 inputfield">
                    <mat-label>Annual Warranty Cost %</mat-label>
                    <input
                      matInput
                      placeholder="Annual Warranty Cost %"
                      name="annualWarrantyCost"
                    />
                  </mat-form-field>
                </div>
                <div class="col-4">
                  <mat-form-field appearance="outline" class="w-100 inputfield">
                    <mat-label>Warranty Argument Months</mat-label>
                    <input
                      matInput
                      placeholder="Warranty Argument Months"
                      name="warrantyArgumentMonths"
                    />
                  </mat-form-field>
                </div>
              </div>
  
              <div class="row">
                <div class="col-8">
                  <mat-form-field appearance="outline" class="w-100 inputfield">
                    <mat-label>Other Non-B2B T&Cs</mat-label>
                    <input
                      matInput
                      placeholder="Other Non-B2B T&Cs"
                      name="Other Non-B2B T&Cs"
                    />
                  </mat-form-field>
                </div>
                <div class="col-4">
                  <mat-form-field appearance="outline">
                    <mat-label>Payment Terms List</mat-label>
                    <mat-select>
                       <mat-option *ngFor="let food of foods" [value]="food.value">
                      {{food.viewValue}}
                    </mat-option> -->
                    <!-- </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button type="button" class="btn btn-primary">Save</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div> -->
   



  status(type: string) {
    let storedData = localStorage.getItem('New Quotation');
    let dataArray = storedData ? JSON.parse(storedData) : [];

    const QuotationFormData = {
      DataContainerId: this.id,
      OperationType: type,
      ActionType: 'Add',
      IsChangeQuotaionSummary: false,
      IsChangeQuotationDetail: this.changeDetect,
      quotation_Details: [this.matchedData],
      Quotation_Summary: [],
    };

    const existingIndex = dataArray.findIndex(
      (item: any) => item.DataContainerId === this.id
    );

    if (existingIndex !== -1) {
      const existingItem = dataArray[existingIndex];

      if (existingItem.OperationType === 'Draft' && type === 'Draft') {
        if (!this.changeDetect) {
          console.log('Draft to Draft without change detection.');
          return;
        }
        if(changeDetect){
          then update the data 
        }
      }

      if (existingItem.OperationType === 'Draft' && type === 'Publish') {
        console.log('Draft to Publish.');
        dataArray[existingIndex] = QuotationFormData;
        //now what happend draft card and publish card has same id ohk then
        // i edited the draft data has some updated values and that draft id  i will publish so publish has alredy that id so it is not updating his values with draft one 
        
      }

      if (existingItem.OperationType === 'Publish' && type === 'Publish') {
        if (!this.changeDetect) {
          console.log('Publish to Publish without change detection.');
          return;
        }
      }
    } else {
      dataArray.push(QuotationFormData);
    }

    localStorage.setItem('New Quotation', JSON.stringify(dataArray));

    console.log('QuotationForm status', QuotationFormData);
  }